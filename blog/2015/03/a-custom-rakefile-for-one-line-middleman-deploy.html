<!doctype html>
<html>
  <head>
    <link href="../../../stylesheets/all-4712ad66.css" rel="stylesheet" type="text/css" />
    <link href="http://fonts.googleapis.com/css?family=Roboto+Condensed|Open+Sans" rel="stylesheet" type="text/css" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css" />
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js" type="text/javascript"></script>
    <script src="../../../javascripts/main-042ae7f9.js" type="text/javascript"></script>
    <script type="text/javascript">var switchTo5x=true;</script>
    <script type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script>
    <script type="text/javascript">stLight.options({publisher: "589de0f3-0631-4114-9018-eb39f91cab0b", doNotHash: false, doNotCopy: false, hashAddressBar: false});</script>

    <meta charset="utf-8" />
    <meta http-equiv='X-UA-Compatible' content='IE=edge;chrome=1' />
    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' name='viewport' />

    <title>A Custom Rakefile for One Line Middleman Deploy | ColbyCheeZe</title>
    <link rel="alternate" type="application/atom+xml" title="Atom Feed" href="/blog/feed.xml" />
  </head>
  <body class="blog blog_2015 blog_2015_03 blog_2015_03_a-custom-rakefile-for-one-line-middleman-deploy">

    <div class="wrapper">
      <header>
  <div class="header-container">

    <h3 class="logo">
      <a href="../../../">ColbyCheeZe</a>
    </h3>

    <nav class="js-menu sliding-panel-content">
      <ul>
        <li class=is-active>
          <a class="nav-link" href="../../">Blog</a>
        </li>
        <li class=>
          <a class="nav-link" href="../../../portfolio/">Portfolio</a>
        </li>
        <li class=>
          <a target="_blank" class="nav-link" href="https://docs.google.com/document/d/1Ra4qSzt5JYJE25rt9srl_cXff_068EuwNYRkE8cxXBM/edit?usp=sharing">Resume</a>
        </li>
        <li class=>
          <a class="nav-link" href="../../../about/">About</a>
        </li>
      </ul>
    </nav>

    <button type="button" class="js-menu-trigger sliding-panel-button">
      <img src="https://raw.githubusercontent.com/thoughtbot/refills/master/source/images/menu-white.png" alt="Menu Icon">
    </button>


  </div>
</header>

<div class="js-menu-screen sliding-panel-fade-screen"></div>


      <section class="main-content" role="main">
          <div class="grid">
    <section class="blog-content">
        <article class="full-article">
          <h1>A Custom Rakefile for One Line Middleman Deploy</h1>
<ul class="meta">
  <i class="fa fa-calendar"></i> <span class="date">Mar  7, 2015</span> 
    <i class="fa fa-tags"></i> 
  <li class="tags"><a href="../../tags/workflow.html">Workflow</a></li>

  <li class="tags"><a href="../../tags/middleman.html">Middleman</a></li>
</ul>

          <div class="body">
            <p>So one of my big things when working is that I am always concious of when I am
repeating myself. I try to write down repeated actions, and look for ways to
reduce them. While working on my Middleman website, I find that I am often
repeating the same 5 steps over and over. </p>

<ol>
<li><code>git add .</code></li>
<li><code>git commit -m &quot;some update&quot;</code></li>
<li><code>git push</code></li>
<li><code>middleman build</code></li>
<li><code>middleman deploy</code></li>
</ol>

<p>Not only do I have to type all of that each time I want to update, but I have to
wait for the process in between which can take a few seconds. Needless to say,
this can get old quick.</p>

<h3 id="enter-the-solution:-rakefile">Enter the solution: Rakefile</h3>
<pre class="highlight ruby"><code><span class="n">desc</span> <span class="s2">"Commit and push changes to Github"</span>
<span class="n">task</span> <span class="ss">:push</span><span class="p">,</span> <span class="p">[</span><span class="ss">:msg</span><span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="s2">"## Adding all files (git add .)"</span>
  <span class="nb">system</span><span class="p">(</span><span class="s2">"git add ."</span><span class="p">)</span>

  <span class="c1"># Handle commas in commit messages</span>
  <span class="n">commit_msg</span> <span class="o">=</span> <span class="n">args</span><span class="p">.</span><span class="nf">to_a</span><span class="p">.</span><span class="nf">join</span><span class="p">(</span><span class="s1">', '</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"## Committing chgnges (git commit -m '</span><span class="si">#{</span><span class="n">commit_msg</span><span class="si">}</span><span class="s2">')"</span>
  <span class="nb">system</span><span class="p">(</span><span class="s2">"git commit -m '</span><span class="si">#{</span><span class="n">commit_msg</span><span class="si">}</span><span class="s2">'"</span><span class="p">)</span>

  <span class="nb">puts</span> <span class="s2">"## Pushing to Github (git push)"</span>
  <span class="nb">system</span><span class="p">(</span><span class="s2">"git push"</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">desc</span> <span class="s2">"Build Blog"</span>
<span class="n">task</span> <span class="ss">:build</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"## Building website (middleman build --clean)"</span>
  <span class="n">status</span> <span class="o">=</span> <span class="nb">system</span><span class="p">(</span><span class="s2">"middleman build --clean"</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">status</span> <span class="p">?</span> <span class="s2">"OK"</span> <span class="p">:</span> <span class="s2">"FAILED"</span>
<span class="k">end</span>

<span class="n">desc</span> <span class="s2">"Deploy website"</span>
<span class="n">task</span> <span class="ss">:deploy</span> <span class="k">do</span>
  <span class="nb">puts</span> <span class="s2">"## Deploying website (middleman deploy)"</span>
  <span class="n">status</span> <span class="o">=</span> <span class="nb">system</span><span class="p">(</span><span class="s2">"middleman deploy"</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="n">status</span> <span class="p">?</span> <span class="s2">"OK"</span> <span class="p">:</span> <span class="s2">"FAILED"</span>
<span class="k">end</span>

<span class="n">desc</span> <span class="s2">"One Line deploy"</span>
<span class="n">task</span> <span class="ss">:go</span><span class="p">,</span> <span class="p">[</span><span class="ss">:msg</span><span class="p">]</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="ss">:push</span><span class="p">,</span> <span class="ss">:build</span><span class="p">,</span> <span class="ss">:deploy</span><span class="p">]</span> <span class="k">do</span> <span class="o">|</span><span class="n">t</span><span class="p">,</span> <span class="n">args</span><span class="o">|</span>
<span class="k">end</span>
</code></pre>

<p>Now all I do is type <code>rake go[&quot;much easier updates&quot;]</code></p>

<p>I&rsquo;ve split up the functions as well, in case all I want to do is push to Github
or do a local build. Anyhow, hope you get some ideas for your own projects in
Middleman or Rails. If you like the idea, check out the <a href="https://github.com/ruby/rake"> official documentation </a>
to learn more.</p>

          </div>
          <div class="article-widgets">
  <span class='st_reddit_large' displayText='Reddit'></span>
  <span class='st_facebook_large' displayText='Facebook'></span>
  <span class='st_twitter_large' displayText='Tweet'></span>
  <span class='st_linkedin_large' displayText='LinkedIn'></span>
  <span class='st_sharethis_large' displayText='ShareThis'></span>
</div>

        </article>
        <section class="disqus widget">
          <div id="disqus_thread"></div>
<script type="text/javascript">
//<![CDATA[
                  var disqus_shortname = 'colbycheeze';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

        </section>
    </section>

    <aside class="blog-widgets">
  <ul class="widget">
    <li><h5 class="heading">Recent Articles</h5></li>
    <li>
      <ol>
          <li>
            <a href="../10/zero-to-developer.html">My Journey from Zero to Developer</a>
          </li>
          <li>
            <a href="../07/discipline-and-habits.html">Achieving the Impossible with Simple Habits and Discipline</a>
          </li>
          <li>
            <a href="../06/publishing-user-data.html">The Right Way to Publish User Data</a>
          </li>
          <li>
            <a href="../06/managing-brain-fog.html">Managing Brain Fog When Programming</a>
          </li>
          <li>
            <a href="../06/vim-as-an-ide.html">Vim as an IDE</a>
          </li>
      </ol>
    </li>
  </ul>

  <ul class="widget">
    <li><h5>All articles</h5></li>
    <li>
      <ol>
          <li>2015</li>
          <ol>
              <li><a href="../10.html">October (1)</a></li>
              <li><a href="../07.html">July (1)</a></li>
              <li><a href="../06.html">June (4)</a></li>
              <li><a href="../05.html">May (5)</a></li>
              <li><a href="../04.html">April (5)</a></li>
              <li><a href="../03.html">March (5)</a></li>
              <li><a href="../02.html">February (2)</a></li>
          </ol>
      </ol>
    </li>
  </ul>

  <ul class="widget">
    <li><h5 class="heading">Tags</h5></li>
    <li>
      <ol>
          <a class="tag" href="../../tags/design.html">Design</a>
          <a class="tag" href="../../tags/how-to.html">How to</a>
          <a class="tag" href="../../tags/middleman.html">Middleman</a>
          <a class="tag" href="../../tags/tools.html">Tools</a>
          <a class="tag" href="../../tags/vim.html">Vim</a>
          <a class="tag" href="../../tags/tmux.html">Tmux</a>
          <a class="tag" href="../../tags/workflow.html">Workflow</a>
          <a class="tag" href="../../tags/learning.html">Learning</a>
          <a class="tag" href="../../tags/recap.html">Recap</a>
          <a class="tag" href="../../tags/resources.html">Resources</a>
          <a class="tag" href="../../tags/rails.html">Rails</a>
          <a class="tag" href="../../tags/productivity.html">Productivity</a>
          <a class="tag" href="../../tags/refactoring.html">Refactoring</a>
          <a class="tag" href="../../tags/video.html">Video</a>
          <a class="tag" href="../../tags/meteor.html">Meteor</a>
          <a class="tag" href="../../tags/tutorial.html">tutorial</a>
          <a class="tag" href="../../tags/javascript.html">Javascript</a>
          <a class="tag" href="../../tags/confidence.html">confidence</a>
          <a class="tag" href="../../tags/soft-skills.html">soft skills</a>
          <a class="tag" href="../../tags/video.html">video</a>
          <a class="tag" href="../../tags/vim.html">vim</a>
          <a class="tag" href="../../tags/workflow.html">workflow</a>
          <a class="tag" href="../../tags/screencast.html">screencast</a>
          <a class="tag" href="../../tags/javascript.html">javascript</a>
          <a class="tag" href="../../tags/tdd.html">tdd</a>
          <a class="tag" href="../../tags/design.html">design</a>
          <a class="tag" href="../../tags/middleman.html">middleman</a>
          <a class="tag" href="../../tags/html.html">html</a>
          <a class="tag" href="../../tags/css.html">css</a>
          <a class="tag" href="../../tags/ide.html">ide</a>
          <a class="tag" href="../../tags/health.html">health</a>
          <a class="tag" href="../../tags/security.html">security</a>
          <a class="tag" href="../../tags/meteor.html">meteor</a>
          <a class="tag" href="../../tags/publications.html">publications</a>
          <a class="tag" href="../../tags/gravatar.html">gravatar</a>
          <a class="tag" href="../../tags/discipline.html">discipline</a>
          <a class="tag" href="../../tags/habits.html">habits</a>
          <a class="tag" href="../../tags/recap.html">recap</a>
      </ol>
    </li>
  </ul>

</aside>

  </div>

      </section>

      
<footer>
<div class="flex-container">
  <section>
    <div class="footer-links">
      <ul>
        <li><a href="http://twitter.com/colbycheeze" target=_blank><i class="fa fa-2x fa-twitter"></i></a></li>
        <li><a href="https://www.linkedin.com/in/colbycheeze" target=_blank><i class="fa fa-2x fa-linkedin"></i></a></li>
        <li><a href="http://www.github.com/colbycheeze" target: _blank><i class="fa fa-2x fa-github"></i></a></li>
        <li><a href="mailto:colby@colbycheeze.com" target: _blank><i class="fa fa-2x fa-envelope-o"></i></a></li>
        <li><a href="http://www.youtube.com/colbycheeze" target: _blank><i class="fa fa-2x fa-youtube"></i></a></li>
      </ul>
    </div>
    <p>Design and code by Colby Williams</p>
    <p><a target="blank" href="https://github.com/colbycheeze/colbycheeze.com/tree/master">View source on Github</a></p>
  </section>
</div>
</footer>

    </div>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(["_setAccount", "UA-16038536-1"]);
  _gaq.push(["_trackPageview"]);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>
  </body>
</html>
